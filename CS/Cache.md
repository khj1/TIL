# 캐시
## 캐시란?
데이터나 값을 미리 복사해놓는 임시 저장소를 의미한다.

## 캐시를 사용하는 이유
- 자주 사용되는 20%의 데이터를 캐싱해둠으로써 효과적인 성능 향상을 이끌어낼 수 있다. (파레토의 법칙)
- 캐시는 데이터의 **공간적, 시간적 지역성**을 고려한다면 캐시를 사용하는 것이 유리하다.

### 공간적 지역성
실제 메모리에서 한번 참조되었던 주소와 인접한 주소의 내용들이 다시 참조될 확률이 높다.

### 시간적 지역성
사용되었던 데이터가 빠른 시일 내에 다시 사용될 가능성이 높다.

## 캐시 전략 패턴
#### Cache Hit
- 캐시에 원하는 데이터가 존재
- 캐시에서 바로 메모리를 조회

#### Cache Miss
- 캐시에 원하는 데이터가 없음
- DB로 가서 데이터를 조회

### 읽기 전략
#### Look Aside 패턴
- 캐시에 문제가 생기는 경우 DB로 요청을 위임한다.
- DB와 캐시가 직접 동기화되지 않기 때문에 데이터 정합성 유지가 어렵다.
- 첫 조회 시 반드시 DB에서 데이터를 조회한 후 캐시에 올려둬야하기 때문에 DB에 부하가 발생할 수 있다.

#### Read Through 패턴
- 항상 캐시를 이용하는 전략이다.
- 캐시에 원하는 데이터가 없다면 캐시가 직접 DB로부터 원하는 데이터를 가져온다.
- 캐시와 DB가 연결되어있기 때문에 캐시, DB 간의 데이터 정합성이 보장된다.
- 캐시가 죽으면 DB에도 영향이 가기 때문에 애플리케이션에 문제가 발생할 수 있다.

### 쓰기 전략
#### Write Around 패턴
- DB에 직접 데이터를 입력한다.
- 캐시를 거치지 않고 DB에 직접 데이터를 쓰기 때문에 성능이 좋다.
- 캐시와 DB 간의 데이터 정합성 유지가 어렵다.

#### Write Back 패턴
- 캐시에 쓰기 작업을 진행한 후 나중에 DB에 반영한다.
- Scheduling 방식을 사용한다.
- 일정 시간이 지난 뒤에 한꺼번에 많은 양의 데이터를 한 번의 쓰기 요청으로 처리할 수 있다.
- 캐시에 문제가 생긴다면 데이터가 DB에 반영되지 않기 때문에 데이터 유실 문제가 발생할 수 있다.

#### Write Through 패턴
- 항상 캐시를 통해서 쓰기 작업을 진행하는 패턴이다.
- 캐시와 DB 간의 데이터 정합성이 보장된다.
- 캐시에 데이터가 쓰여진 직후 DB에도 해당 내용이 반영된다.
- 두 번의 쓰기가 항상 진행되기 때문에 성능 이슈가 발생할 수 있다.

## 캐시 사용 유의점
1. 자주 사용되면서 변경이 되지 않는 데이터에 캐시를 적용하는 것이 좋다.
2. 유실되어도 크게 문제가 없는 데이터에 캐시를 적용하는 것이 좋다.
3. DB와 함께 사용할 때는 항상 데이터 정합성 문제에 대해 고려하는 것이 바람직하다.

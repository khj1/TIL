# 비즈니스/도메인 로직

도메인, 비즈니스라는 용어는 '소프트웨어가 풀고자하는 현실 세상의 문제'를 가리킨다.

은행 앱이라면, 금융 및 은행 업무가 도메인이자 비즈니스이다.

반대로 공학/기술적인 문제에 속하는 것들은 대게 도메인과는 구별된다. 예를 들면 은행 사용자 데이터를 어떻게 효율적으로 관리할 것인가와 같은 문제들 말이다.

핵심적인 기능들을 제외하고 DB에 연결하거나, 서버 또는 클라이언트와 통신하는 기능들은 어플리케이션 서비스 로직이라고 부른다.

도메인 로직과 서비스 로직을 구분하는 척도가 바로 '비즈니스 의사결정'이다.

> 이 코드가 현실 문제, 즉 비즈니스에 대한 의사결정을 하고 있는가?

## 도메인 로직과 서비스 로직은 구체적으로 어떻게 다를까?

모바일 송금 앱은 다음과 같은 프로세스를 거친다.

1. 계좌 잔액이 충분한지 확인한다.
2. 유효하다면 송금 버튼을 활성화하고, 그렇지 않다면 에러 메시지를 띄운다.
3. 멤버십 등급에 맞춰 송금 수수료를 계산한다.
4. 송금 수수료를 결제할 수 있도록 외부 결제 서비스에 요청한다.
5. 사용자의 잔액을 감소시킨다.
6. 사용자의 잔액을 DB에 저장한다.

여기서 도메인 로직에 해당하는 기능들은 다음과 같다.

1. 계좌 잔액이 충분한지 확인한다.
    - 송금이 가능한지에 대한 의사결정
4. 송금 수수료를 계산한다.
    - 송금에 드는 비용을 정책에 따라 결정
5. 사용자의 잔액을 감소시킨다.
    - 송금이라는 서비스를 수행

서비스 로직에 해당하는 기능들은 다음과 같다.

2. 유효하지 않다면 에러 메시지를 띄운다.
    - UI
4. 송금 수수료를 결제할 수 있도록 외부 결제 서비스에 요청한다.
    - Networking
6. 잔액을 DB에 저장한다.
    - Persistence

만약 어떤 코드가 명확하게 도메인 로직인지 구분하기 어렵다면, 해당 코드가 하는 일을 쪼개야 한다는 신호다.

## 명확한 관심사의 분리

이렇게 도메인 로직과 아닌 것을 나누는 이유는 관심사의 분리를 위해서다. 도메인 로직과 서비스 로직은 역할이 구분되기 때문에 변경의 이유도 서로 다르다.

도메인 로직과 다른 로직의 결합도를 낮추면 개발자는 DB, UI와 같은 기술적 구현 사항에 얽매이지 않고 도메인 로직을 이해할 수 있다.




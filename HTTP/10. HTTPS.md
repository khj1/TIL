# HTTPS
Hypertext Transfer Protocol Secure
- SSL(Secure Sockets Layer: 보안 소켓 계층) 사용
- SSL은 서버와 브라우저 사이에 안전하게 암호화된 연결을 만들 수 있게 도와준다.
- 서버와 브라우저가 민감한 정보를 주고받을 때 해당 정보가 도난당하는 것을 막아준다.
- HTTP 자체를 암호화는 것이 아니라 HTTP Body와 Header를 암호화한다.

## HTTPS를 사용하는 이유
- **데이터 보안성**
- **데이터 무결성**
  - 데이터가 조작되지 않았음을 보장한다.
  - 암호화 해시 함수(Crytographic Hash Function)를 활용해서 데이터 조작 여부를 알 수 있다.
  - 클라이언트가 데이터 전송 시 데이터와 데이터 암호화 해시 값을 함께 전송한다.
  - 서버는 전달받은 데이터를 암호화 해시로 변환하고 이를 서버로부터 전달받은 데이터 암호화 해시 값과 비교한다.
  - 두 값이 서로 다르면 데이터가 조작되었다는 뜻이다.
- **통신 상대 인증**
  - 비정상적인 서버가 데이터를 전달받진 않았는지 확인한다.
  - 이 문제를 해결하기 위해 클라이언트와 서버 사이에 인증 기관을 두어서 통신한다.
  - 인증기관은 서버 인증서를 인증하기 위한 중간 인증서, 그리고 중간 인증서가 신뢰할 수 있는 인증서인지 확인하는 루트 인증서를 활용한다.
  - 따라서 비정상적인 서버가 가짜 인증기관을 만들더라도 안전하게 통신 상대를 인증할 수 있다.
- **검색 엔진 최적화**(SEO: Search Engine Optimization)
  - 구글은 HTTPS 웹 사이트에 가산점을 부여한다.
  - 자신의 웹 사이트를 검색 엔진에 더 빈번하게 노출시키고 싶다면 HTTPS는 필수적으로 사용해야한다.
  - AMP(Accelerated Mobile Pages: 가속화된 모바일 페이지)를 만들 때 HTTPS를 사용해야한다.

> AMP는 모바일 기기에서 컨텐츠를 더 빠르게 로딩시키기 위해 구글에서 제작되었다.

## SSL/TLS
> TLS는 SSL의 업그레이드 버전이지만 둘 중 어느 용어를 사용해도 무방하다.

- SSL은 Netscape사에서 웹 서버와 웹 브라우저간의 보안을 위해 만든 프로토콜이다.
- 공개키/개인키, 대칭키 방식을 혼합해서 사용한다.

### 대칭키 방식
- 동일한 Key로 암호화/복호화가 가능하다.
- 암호화/복호화가 쉽지만, 키가 탈취당하면 보안적으로 치명적일 수 있다.

### 공개키(비대칭키) 방식
- 서로 다른 키로 암호화/복호화를 수행한다.
- 데이터를 암호화할 때는 공개키를 사용하고, 데이터를 복호화할 떄는 개인키를 사용한다.
- 공개키로 암호화한 데이터는 오로지 개인키로만 복호화할 수 있기 때문에 공개키가 탈취되도 문제 없다.
- 공개키 방식은 보안적으로 유리한 대신 암호화 연산 시간이 더 소요되기 때문에 비용이 더 크다.

**SSL은 공개키와 대칭키의 단점들 때문에 하나의 방식만을 고집하지 않고 두 방식을 모두 사용한다.**

## SSL 통신 과정
- SSL은 공개키 방식으로 대칭키를 전달한다.
- 대칭키를 활용하여 암호화/복호화를 수행한다.

### 공개키와 대칭키 방식을 혼합해서 사용하는 방법
- A에서 B로 접속 요청을 보낸다.
- B는 A에게 자신의 공개키를 전송한다.
- A는 자신의 대칭키를 B에서 받은 공개키로 암호화한다.
- 암호화한 대칭키를 B에게 전달한다.
- B는 A의 암호화된 대칭키를 자신의 개인키로 복호화한다.
- B는 A의 대칭를 알 수 있게된다.

### 암호화 통신이 이루어지는 과정

![image](https://github.com/khj1/TIL/assets/74335027/d1f911f4-bfc7-4cb1-8a1f-f9b21e7e652f)

- 웹 사이트는 사이트 인증서를 발급받기 위해 인증기관(CA: Certificate Authority)에 자신의 사이트 정보와 사이트 공개키를 전달한다.
- 인증기관에서는 전달받은 정보들을 검증한다.
- 정보가 검증되면 인증기관은 전달받은 정보들을 자신의 개인키로 서명한다.
- 서명 후에 사이트 인증서(SSL 인증서)를 생성하여 웹 사이트로 전송한다.
- 인증기관은 사용자들에게 인증기관 공개키를 전달한다.
- 인증기관의 공개키는 사용자들의 브라우저에 내장된다.
- 사용자가 사이트 접속 요청을 보낸다.
- 사이트는 사용자에게 자신의 사이트 인증서를 보낸다.
- 사용자는 브라우저에 내장되어있는 인증기관 공개키로 사이트 인증서를 복호화해서 검증한다.
- 사이트 인증서를 복호화하면 사이트 정보와 사이트 공개키를 알 수 있게된다.
- 사용자는 자신의 대칭키를 사이트 공개키로 암호화한다.
- 암호화한 대칭키를 사이트에 전송한다.
- 사이트는 자신의 개인키로 사용자로부터 전달받은 암호문은 복호화해서 사용자의 대칭키를 알 수 있게된다.
- 결과적으로 사용자와 사이트는 사용자의 대칭키를 활용하여 서로의 데이터를 암호화해서 전송할 수 있게된다.